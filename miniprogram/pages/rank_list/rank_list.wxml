<!--pages/rank_list/rank_list.wxml-->
<view class="light-main" style="background: linear-gradient(180deg, #FF6347 0%, #FFC1B5 83.33%, #FFFFFF 100%);">
    <view class="hori-layout" style="width: 90%; height: 110px; margin-top: 15px;">
        <view style="width: 60%; margin: 0 auto;">
            <image src="../../resources/light-icons/rank-title.png" style="width: 220px; height:66px; margin: auto;"></image>
            <view class="center" style="height: 30px;">
                <!-- 日榜/周榜切换 -->
                <view hover-class="onBtnPushed" class="top-btn" style="flex: 1; border: solid white 1px; margin: 4px 6px; border-radius: 8px; height: 25px;" bindtap="switchRankType">
                    <image src="../../resources/light-icons/turn.png" style="width: 16px; height: 16px; margin-right: 5px;"></image>
                    <text style="color: white;">{{rankType === 'daily' ? '日榜' : '周榜'}}</text>
                </view>

                <!-- 分享按钮 -->
                <view hover-class="onBtnPushed" class="top-btn" style="flex: 1; border: solid white 1px; margin: 4px 6px; border-radius: 8px; height: 25px;" bindtap="shareRank">
                    <image src="../../resources/light-icons/share.png" style="width: 16px; height: 16px; margin-right: 5px;"></image>
                    <text style="color: white;">分享</text>
                </view>

                <!-- 刷新按钮 -->
                <view hover-class="onBtnPushed" class="top-btn" style="flex: 1; border: solid white 1px; margin: 4px 6px; border-radius: 8px; height: 25px;" bindtap="refreshData" bind:tap="refreshData">
                    <image src="../../resources/light-icons/refresh.png" style="width: 16px; height: 16px; margin-right: 5px;"></image>
                    <text style="color: white;">刷新</text>
                </view>
            </view>
        </view>
        <image src="../../resources/light-icons/race-cup.png" style="width: 151rpx; height: 223rpx; margin: auto; position: relative; bottom: -10px; display: block; box-sizing: border-box; left: -2rpx; top: 0rpx"></image>
    </view>

    <!-- 数据展示 -->
    <view class="light-bkg center" style="width: 90%; height: 15%; z-index: 100;">
        <!-- 在线人数/本周用户 -->
        <view hover-class="onBoxPushed" class="light-out data-box">
            <text class="data-main">{{rankType === 'daily' ? dailyData.onlineCount : weeklyData.onlineCount}}</text>
            <text class="data-tip">{{rankType === 'daily' ? '在线人数/人' : '本周用户/人'}}</text>
        </view>
        <!-- 今日总专注/本周总专注 -->
        <view hover-class="onBoxPushed" class="light-out data-box">
            <text class="data-main">{{rankType === 'daily' ? dailyData.totalFocus : weeklyData.totalFocus}}</text>
            <text class="data-tip">累计专注/分钟</text>
        </view>
        <!-- 今日队伍/本周队伍 -->
        <view hover-class="onBoxPushed" class="light-out data-box">
            <text class="data-main">{{rankType === 'daily' ? dailyData.teamCount : weeklyData.teamCount}}</text>
            <text class="data-tip">{{rankType === 'daily' ? '今日队伍/支' : '本周队伍/支'}}</text>
        </view>
    </view>

    <!-- 排行榜 -->
    <view class="light-bkg" style="width: 90%; flex: 1; margin: 15px 0; display: flex; flex-direction: column; align-items: center;">
        <block wx:for="{{rankType === 'daily' ? dailyData.rankList : weeklyData.rankList}}" wx:key="rank">
            <view class="rank-box">
                <block wx:if="{{item.rank <= 3}}">
                    <image class="rank-num" src="../../resources/light-icons/{{item.rank === 1 ? 'first-cup' : item.rank === 2 ? 'second-cup' : 'third-cup'}}.png"></image>
                </block>
                <block wx:else>
                    <view class="rank-num center" style="background-color: #dddddd; border-radius: 50%;">
                        {{item.rank}}
                    </view>
                </block>
                <view class="shot-box">
                    <image src="{{item.avatar}}" style="width: 100%; height: 100%;"></image>
                </view>
                <text class="user-name">{{item.name}}</text>
                <block wx:if="{{item.rank <= 3}}">
                    <text class="emp-focus-time">{{item.time}}</text>
                </block>
                <block wx:if="{{item.rank > 3}}">
                    <text class="focus-time">{{item.time}}</text>
                </block>
            </view>
        </block>
    </view>
</view>